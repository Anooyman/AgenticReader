<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⚙️ LLMReader 配置管理</title>

    <!-- CSS 样式 -->
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body>
    <!-- 配置页面容器 -->
    <div class="app-container">
        <!-- 顶部导航栏 -->
        <header class="header">
            <div class="header-content">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h1 class="header-title">⚙️ LLMReader 配置管理</h1>
                        <p class="header-subtitle">管理LLM提供商设置、PDF处理参数和系统配置</p>
                    </div>
                    <div>
                        <a href="/" class="btn btn-secondary" style="color: white; text-decoration: none;">
                            🏠 返回主页
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- 主要内容区域 -->
        <main class="main-content" style="max-width: 800px;">
            <div class="content-area">
                <!-- LLM 提供商配置 -->
                <section class="config-section">
                    <h3>🤖 LLM 提供商配置</h3>

                    <div class="form-group">
                        <label for="provider-select">选择 LLM 提供商:</label>
                        <select id="provider-select" class="form-select">
                            <option value="azure">Azure OpenAI</option>
                            <option value="openai">OpenAI</option>
                            <option value="ollama">Ollama</option>
                        </select>
                        <p class="config-note">请确保在 .env 文件或环境变量中配置相应的API密钥与模型信息。</p>
                    </div>

                    <div class="provider-details" id="provider-details">
                        <!-- 动态显示所选提供商的详细配置 -->
                    </div>
                </section>

                <hr class="section-divider">

                <!-- PDF 处理配置 -->
                <section class="config-section">
                    <h3>📄 PDF 处理配置</h3>

                    <div class="quality-section">
                        <h4>⚙️ PDF转图片质量设置</h4>
                        <div class="quality-grid">
                            <div class="quality-selector">
                                <label for="pdf-preset">选择PDF转图片质量预设:</label>
                                <select id="pdf-preset" class="form-select">
                                    <option value="fast">🚀 快速 (150 DPI + 低质量)</option>
                                    <option value="balanced">⚖️ 平衡 (200 DPI + 中质量)</option>
                                    <option value="high" selected>🎯 高质量 (300 DPI + 高质量)</option>
                                    <option value="ultra">💎 超高质量 (600 DPI + 极致)</option>
                                </select>
                            </div>
                            <div class="quality-info">
                                <div id="preset-info" class="info-card">
                                    <strong>当前设置详情:</strong><br>
                                    📐 DPI: 300<br>
                                    🎨 质量: high<br>
                                    📝 说明: 高质量OCR效果，推荐用于重要文档
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <hr class="section-divider">

                <!-- 系统配置 -->
                <section class="config-section">
                    <h3>🔧 系统配置</h3>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="auto-save-outputs" checked>
                            自动保存输出文件 (摘要MD/PDF文件)
                        </label>
                        <p class="config-note">启用后，系统会自动将生成的摘要保存到 data/output 目录。</p>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="enable-notifications" checked>
                            启用处理完成通知
                        </label>
                        <p class="config-note">文档处理完成后显示桌面通知。</p>
                    </div>

                    <div class="form-group">
                        <label for="log-level">日志级别:</label>
                        <select id="log-level" class="form-select">
                            <option value="INFO">INFO - 一般信息</option>
                            <option value="DEBUG">DEBUG - 详细调试</option>
                            <option value="WARNING">WARNING - 警告信息</option>
                            <option value="ERROR">ERROR - 错误信息</option>
                        </select>
                        <p class="config-note">调试模式会输出更详细的处理信息。</p>
                    </div>
                </section>

                <hr class="section-divider">

                <!-- 操作按钮 -->
                <section class="action-section">
                    <div class="action-buttons">
                        <button id="save-config-btn" class="btn btn-primary">💾 保存配置</button>
                        <button id="reset-config-btn" class="btn btn-secondary">🔄 重置为默认</button>
                        <button id="test-connection-btn" class="btn btn-info">🔗 测试连接</button>
                    </div>
                </section>

                <!-- 状态消息 -->
                <div id="config-status" class="status-message" style="display: none;"></div>

                <!-- 连接测试结果 -->
                <section class="test-results" id="test-results" style="display: none;">
                    <h4>🧪 连接测试结果</h4>
                    <div id="test-output" class="test-output"></div>
                </section>
            </div>
        </main>
    </div>

    <!-- JavaScript -->
    <script src="/static/js/config.js"></script>
</body>
</html>